{% extends 'base.html' %}
{% load static %}

{% block page_header %} ALL PRODUCTS {% endblock %}

{% block content %}
<div class="row">
    <!-- Card Projects -->
    {% for product in products %}
    <div class="col-md-4 ">
        <div class="card">
            <div class="card-image">
                <img class="img-responsive card-inside-image" src="http://material-design.storage.googleapis.com/publish/v_2/material_ext_publish/0Bx4BSt6jniD7TDlCYzRROE84YWM/materialdesign_introduction.png">
                <span class="card-title"></span>
            </div>

            <div class="card-content">
                <h4> {{ product.name }} </h4>
                <p> A very popular and delicious flavor. Made from belguim chocolate </p>
                <br />
                <p> <div style="text-align:left;float:left" ><b>{{ product.price}} B</b></div>  <div style="text-align: right;float:right;">&nbsp; <b>{{ product.score }}/10</b> </div> </p>
                <br />
            </div>
            <div class="card-action">
                <a href="#"  class="purchase_modal" id="product_{{ i }}"> Purchase </a>
            </div>
        </div>
    </div>
    {% endfor %}
    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
	    <div class="modal-content">
		<div class="modal-header">
		    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		    <h4 class="modal-title" id="myModalLabel">Confirmation</h4>
		</div>
		<div class="modal-body">
                    <form class="form-inline">
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label for="Amount"> Amount : </label>
                                <input class="form-control" placeholder="amount" name="amount" type="number">
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group" style="float:right;">
                                <label for="Max"> Max : </label>
                                <input class="form-control" placeholder="amount" name="max_amount" type="number" value="10" disabled>
                            </div>
                        </div>
                    </form>
                    <br />
                    <br />
		</div>
		<div class="modal-footer">
		    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
		    <button type="button" name="purchase_button" class="btn btn-primary" value='1234'>Purchase</button>
		</div>
	    </div>
	    <!-- /.modal-content -->
	</div>
	<!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</div>


{% endblock %}
{% block css %}
	<link href="{% static 'css/card.css' %}" rel="stylesheet" type="text/css">
{% endblock %}

{% block js %}
<script>
$( document ).ready(function() {
    $("#notification_bar").hide();
    $("a.purchase_modal").click(function (){
	$.getJSON("{% static 'sample/product.json' %}", function(product) {
            $("input[name=max_amount]").val(product.amount);
            $("button[name=purchase_button]").val(product.id);
	    $("#myModal").modal('hide').modal('show');
	});
    });
    $("button[name=purchase_button]").click(function() {
        $("#myModal").modal('hide');
        $("#notification_bar").fadeOut().fadeIn();
        alert("requesting {% url 'all_product' %}/" + this.value);
    });
    $("button#btn_notification").click(function(){ $("#notification_bar").fadeOut();});
});
</script>
{% endblock %}
